#!/bin/bash

if [ "$EUID" -ne 0 ]; then
  echo "Please run as root"
  exit 1
fi

apt-get update
apt-get install -y cpanminus golang-go wafw00f golang chromium-driver krb5-user

declare -A tools
tools=(
  ["KeyTabExtract"]="https://github.com/sosdave/KeyTabExtract.git"
  ["fpm"]="https://github.com/jordansissel/fpm.git"
  ["PCredz"]="https://github.com/lgandx/PCredz.git"
  ["PowerShell_IPv4PortScanner"]="https://github.com/BornToBeRoot/PowerShell_IPv4PortScanner.git"
  ["git-dumper"]="https://github.com/arthaud/git-dumper.git"
  ["firepwn-tool"]="https://github.com/0xbigshaq/firepwn-tool.git"
  ["GodPotato"]="https://github.com/BeichenDream/GodPotato.git"
  ["OneShot"]="https://github.com/kimocoder/OneShot.git"
  ["ligolo-ng"]="https://github.com/nicocha30/ligolo-ng.git"
  ["fimap"]="https://github.com/kurobeats/fimap.git"
  ["firefox_decrypt"]="https://github.com/unode/firefox_decrypt.git"
  ["SharpGPOAbuse"]="https://github.com/FSecureLABS/SharpGPOAbuse.git"
  ["rdp-sec-check"]="https://github.com/CiscoCXSecurity/rdp-sec-check.git"
  ["DefaultCreds-cheat-sheet"]="https://github.com/ihebski/DefaultCreds-cheat-sheet"
  ["username-anarchy"]="https://github.com/urbanadventurer/username-anarchy.git"
  ["mimipenguin"]="https://github.com/huntergregal/mimipenguin.git"
  ["Invoke-TheHash"]="https://github.com/Kevin-Robertson/Invoke-TheHash.git"
)

cd /opt
mkdir offensive_Tools
cd offensive_Tools

for tool in "${!tools[@]}"; do
  git clone "${tools[$tool]}" "$tool"
done

pip3 install tinydb fire
cp ./DefaultCreds-cheat-sheet/creds /usr/bin/ && chmod +x /usr/bin/creds

wget https://github.com/Arrexel/phpbash/raw/master/phpbash.php -O phpbash.php
bash <(curl -sSL https://raw.githubusercontent.com/sundowndev/phoneinfoga/master/support/scripts/install)
install ./phoneinfoga /usr/local/bin/phoneinfoga

wget https://github.com/antonioCoco/RunasCs/raw/master/Invoke-RunasCs.ps1 -O Invoke-RunasCs.ps1
go install github.com/tomnomnom/waybackurls@latest

curl -LO https://github.com/michenriksen/aquatone/releases/download/v1.7.0/aquatone_linux_amd64_1.7.0.zip
unzip aquatone_linux_amd64_1.7.0.zip && rm aquatone_linux_amd64_1.7.0.zip
mv ./aquatone /usr/bin/aquatone

wget https://academy.hackthebox.com/storage/modules/279/ReconSpider.zip
pip3 install scrapy
unzip ReconSpider.zip && rm ReconSpider.zip

cpanm Encoding::BER
pip install --user uploadserver

mkdir /home/kali/webserver
cd /home/kali/webserver
curl -LO https://gist.githubusercontent.com/ddumicz/909d98a0e794a42326d5fcd6d9f2c4ad/raw/dc5419b9702015bb6652a07e46743b3554c05e2f/Invoke-AESEncryption.ps1

cp /opt/offensive_Tools/rdp-sec-check/rdp-sec-check.pl /usr/bin/rdp-sec-check
cp /root/go/bin/waybackurls /usr/bin/waybackurls

wget https://raw.githubusercontent.com/CiscoCXSecurity/linikatz/master/linikatz.sh

echo "Repositories cloned, files downloaded, and necessary packages installed successfully."
